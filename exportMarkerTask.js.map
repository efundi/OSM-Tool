{"version":3,"file":"exportMarkerTask.js","mappings":"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","sources":["webpack://pdf-marker/./src-electron/constants.ts","webpack://pdf-marker/./src-electron/utils.ts","webpack://pdf-marker/./src/shared/constants/constants.ts","webpack://pdf-marker/./src/shared/info-objects/workspace.ts","webpack://pdf-marker/external commonjs \"fs-extra\"","webpack://pdf-marker/external commonjs \"lodash\"","webpack://pdf-marker/external commonjs \"rxjs\"","webpack://pdf-marker/external commonjs \"zip-dir\"","webpack://pdf-marker/external node-commonjs \"fs\"","webpack://pdf-marker/external node-commonjs \"fs/promises\"","webpack://pdf-marker/external node-commonjs \"node:worker_threads\"","webpack://pdf-marker/external node-commonjs \"os\"","webpack://pdf-marker/external node-commonjs \"path\"","webpack://pdf-marker/webpack/bootstrap","webpack://pdf-marker/webpack/runtime/compat get default export","webpack://pdf-marker/webpack/runtime/define property getters","webpack://pdf-marker/webpack/runtime/hasOwnProperty shorthand","webpack://pdf-marker/webpack/runtime/make namespace object","webpack://pdf-marker/./src-electron/export-marker-task.ts"],"sourcesContent":["import {sep} from 'path';\n\nexport const CONFIG_FILE = 'config.json';\n\nexport const RUBRICS_FILE = 'rubrics.json';\nexport const APP_DATA_DIR = process.env.APPDATA || (process.platform === 'darwin' ? process.env.HOME +\n  '/Library/Preferences' : process.env.HOME + '/.local/share');\nexport const CONFIG_DIR = APP_DATA_DIR + sep + 'pdf-config' + sep;\nexport const COMMENTS_FILE = 'comments.json';\n\n/*COMMON MESSAGES*/\nexport const INVALID_RUBRIC_JSON_FILE = 'Rubric file is not a valid JSON file!';\nexport const COULD_NOT_CREATE_RUBRIC_FILE = 'Failed to read rubric file!';\nexport const COULD_NOT_READ_RUBRIC_LIST = 'Could not read list of rubrics!';\nexport const NOT_PROVIDED_RUBRIC = 'Rubric must be provided!';\nexport const COULD_NOT_CREATE_CONFIG_DIRECTORY = 'Failed to create configuration directory!';\nexport const NOT_CONFIGURED_CONFIG_DIRECTORY = 'Configure default location to extract files to on the settings page!';\nexport const EXTRACTED_ZIP = 'Successfully extracted assignment to selected workspace!';\nexport const EXTRACTED_ZIP_BUT_FAILED_TO_WRITE_TO_RUBRIC = 'Successfully extracted assignment to selected workspace! ' +\n  'But Failed to write to rubrics file!';\nexport const INVALID_STUDENT_FOLDER = 'Invalid student folder';\n\nexport const COULD_NOT_READ_COMMENT_LIST = 'Could not read list of comments!';\nexport const NOT_PROVIDED_COMMENT = 'Comment must be provided!';\n\nexport const HIGHLIGHT_HEIGHT = 20;\nexport const STUDENT_DIRECTORY_ID_REGEX = /.*\\((.+)\\)/;\nexport const STUDENT_DIRECTORY_REGEX = /(.*), (.*)\\((.+)\\)/;\nexport const STUDENT_DIRECTORY_NO_NAME_REGEX = /(.*),\\((.+)\\)/;\n","\nimport {constants, existsSync, lstatSync, readdirSync, rmdirSync, unlinkSync} from 'fs';\nimport {access, readdir, stat, writeFile} from 'fs/promises';\nimport {sep} from 'path';\nimport {noop} from 'rxjs';\nimport {IpcResponse} from '@shared/ipc/ipc-response';\nimport {IpcMainInvokeEvent} from 'electron';\nimport {Stream} from 'stream';\n\ndeclare type IpcHandler<T> = (event: IpcMainInvokeEvent, ...args: any[]) => Promise<T>;\n\n/**\n * This is a middleware response used for IPC to work around a bug in electron where rejected promises\n * loose the original reason. This way, the main process always returns a resolved promise, but the result IpcResponse\n * will contain information if there was an error or not, and then reject the promise in the renderer side\n * https://github.com/electron/electron/issues/24427\n * @param listener\n */\nexport function toIpcResponse<T>(listener: IpcHandler<T>): IpcHandler<IpcResponse<T>> {\n  // Return a function that can be used as an IPC handler\n  return (event, ...args) => {\n    return listener(event, ...args).then(\n      (data) => {\n        return {\n          data\n        } as IpcResponse<T>;\n      }, (error) => {\n        return {\n          error\n        } as IpcResponse<T>;\n      });\n  };\n}\n\nexport const isFunction = (functionToCheck) => {\n  return functionToCheck && {}.toString.call(functionToCheck) === '[object Function]';\n};\n\nexport const isNullOrUndefined = (object: any): boolean => {\n  return (object === null || object === undefined);\n};\n\nexport const isNullOrUndefinedOrEmpty = (object: string): boolean => {\n  return (object === null || object === undefined || object === '');\n};\n\n\nexport function writeToFile(filePath: string,\n                            data: Uint8Array | string,\n                            customSuccessMsg: string = null,\n                            customFailureMsg: string = null): Promise<string> {\n  return writeFile(filePath, data).then(() => {\n    return (customSuccessMsg) ? customSuccessMsg : 'Successfully saved to file!';\n  }, (err) => {\n    return Promise.reject((customFailureMsg) ? customFailureMsg : err.message);\n  });\n}\n\n\n/*HELPER FUNCTIONS*/\nexport function checkAccess(filePath: string): Promise<any> {\n  return access(filePath, constants.F_OK).then(noop, (err) => {\n    return Promise.reject(err.message);\n  });\n}\n\n/*END HELPER FUNCTIONS*/\n\n\n\nexport const isJson = (str) => {\n  try {\n    JSON.parse(str);\n  } catch (e) {\n    return false;\n  }\n  return true;\n};\n\n\n\nexport const deleteFolderRecursive = (path) => {\n  if (existsSync(path)) {\n    readdirSync(path).forEach(function(file, index) {\n      const curPath = path + '/' + file;\n      if (isFolder(curPath)) { // recurse\n        deleteFolderRecursive(curPath);\n      } else { // delete file\n        unlinkSync(curPath);\n      }\n    });\n    rmdirSync(path);\n  }\n};\n\nexport function isFolder(curPath: string) {\n  return lstatSync(curPath).isDirectory();\n}\n\nexport function isEmpty(str: string) {\n  return str === null || str === undefined || str.length === 0;\n}\n\nexport function isBlank(data: string = '') {\n\n  if (data === null || data === undefined) {\n    return true;\n  }\n\n  data += '';\n  return data === '' || data.trim() === '';\n}\n\n\n\nexport function joinError(currentMessage: string = '', newMessage: string = ''): string {\n  currentMessage += (!isEmpty(currentMessage)) ? `, ${newMessage}` : newMessage;\n  return currentMessage;\n}\n\n\nexport function getAllFiles(dirPath: string, arrayOfFiles?: string[]): Promise<string[]> {\n  return readdir(dirPath).then((files) => {\n    arrayOfFiles = arrayOfFiles || [];\n\n    const promises: Promise<any>[] = files.map((file) => {\n      return stat(dirPath + sep + file).then((statInfo) => {\n        if (statInfo.isDirectory()) {\n          return getAllFiles(dirPath + sep + file, arrayOfFiles).then((dirFiles) => {\n            arrayOfFiles = dirFiles;\n          });\n        } else {\n          arrayOfFiles.push(dirPath + sep + file);\n        }\n      });\n    });\n\n    return Promise.all(promises).then(() => arrayOfFiles);\n  });\n}\n\nexport function stream2buffer(stream: Stream): Promise<Buffer> {\n  return new Promise < Buffer > ((resolve, reject) => {\n    const _buf = new Array<any>();\n    stream.on('data', chunk => _buf.push(chunk));\n    stream.on('end', () => resolve(Buffer.concat(_buf)));\n    stream.on('error', err => reject(`error converting stream - ${err}`));\n  });\n}\n","import {TreeNode, TreeNodeType} from '@shared/info-objects/workspace';\n\nexport const DEFAULT_COLOR = '#6f327a';\nexport const DEFAULT_WORKSPACE = 'Default Workspace';\nexport const SUBMISSION_FOLDER = 'Submission attachment(s)';\nexport const FEEDBACK_FOLDER = 'Feedback Attachment(s)';\nexport const SETTING_FILE = '.settings.json';\nexport const MARK_FILE = '.marks.json';\nexport const GRADES_FILE = 'grades.csv';\n\nexport const ASSIGNMENT_ROOT_FILES = [GRADES_FILE, 'grades.xls', 'grades.xlsx'];\n\nexport const ASSIGNMENT_BACKUP_DIR = '.backup';\nexport const FEEDBACK_ZIP_ENTRY_REGEX = /\\/(.*)\\/Feedback Attachment\\(s\\)\\/(.*)\\.pdf/;\nexport const SUBMISSION_ZIP_ENTRY_REGEX = /\\/(.*)\\/Submission attachment\\(s\\)\\/(.*)\\.pdf/;\n\nexport const PDFM_FILES = [MARK_FILE, SETTING_FILE];\n\n\nexport function uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nexport function PDFM_FILES_FILTER(treeNode: TreeNode): boolean {\n  return !(treeNode.type === TreeNodeType.FILE && PDFM_FILES.indexOf(treeNode.name) >= 0);\n}\n\n/**\n * < 0, a should be before\n * = 0, same level\n * > 0, a should be after\n * @param a\n * @param b\n * @constructor\n */\nexport const PDFM_FILE_SORT = (a: TreeNode, b: TreeNode) => {\n  let diff = a.type - b.type;\n  if (diff === 0) {\n    diff = a.name.localeCompare(b.name);\n  }\n  return diff;\n};\n","import {find} from 'lodash';\n\nexport enum TreeNodeType {\n  WORKSPACE,\n  ASSIGNMENT,\n  SUBMISSION,\n  FEEDBACK_DIRECTORY,\n  SUBMISSIONS_DIRECTORY,\n  FILE\n}\n\nexport interface TreeNode {\n  name: string;\n  type: TreeNodeType;\n  dateModified: Date;\n  parent: TreeNode;\n  children?: TreeNode[];\n}\n\nexport interface Workspace extends TreeNode {\n  type: TreeNodeType.WORKSPACE;\n  children: WorkspaceAssignment[];\n  parent: null;\n}\n\nexport interface WorkspaceAssignment extends TreeNode {\n  type: TreeNodeType.ASSIGNMENT;\n  children: (WorkspaceFile| StudentSubmission)[];\n  parent: Workspace;\n}\n\nexport interface WorkspaceFile extends TreeNode {\n  type: TreeNodeType.FILE;\n}\n\nexport interface SubmissionAttachments extends TreeNode {\n  type: TreeNodeType.SUBMISSIONS_DIRECTORY;\n  children: WorkspaceFile[];\n  parent: StudentSubmission;\n}\n\nexport interface FeedbackAttachments extends TreeNode {\n  type: TreeNodeType.FEEDBACK_DIRECTORY;\n  children: WorkspaceFile[];\n  parent: StudentSubmission;\n}\n\nexport interface StudentSubmission extends TreeNode {\n  studentName: string;\n  studentSurname: string;\n  studentId: string;\n  children: (WorkspaceFile|SubmissionAttachments|FeedbackAttachments)[];\n  parent: WorkspaceAssignment;\n}\n\nexport function findTreeNode(path: string, roots: TreeNode[]): TreeNode {\n  const paths = path.split('/');\n  let rootNode = find(roots, {name: paths[0]});\n  paths.slice(1).forEach(pi => {\n    rootNode = rootNode.children.find(tn => tn.name === pi);\n  });\n  return rootNode;\n}\n\nexport function findTreeNodes(path: string, roots: TreeNode[]): TreeNode[] {\n  const nodes: TreeNode[] = [];\n  const paths = path.split('/');\n  let rootNode = find(roots, {name: paths[0]});\n  nodes.push(rootNode);\n  paths.slice(1).forEach(pi => {\n    rootNode = rootNode.children.find(tn => tn.name === pi);\n    nodes.push(rootNode);\n  });\n  return nodes;\n}\n","module.exports = require(\"fs-extra\");","module.exports = require(\"lodash\");","module.exports = require(\"rxjs\");","module.exports = require(\"zip-dir\");","module.exports = require(\"fs\");","module.exports = require(\"fs/promises\");","module.exports = require(\"node:worker_threads\");","module.exports = require(\"os\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * ##################################################\n *\n *  BE REALLY CAREFUL WHAT YOU IMPORT HERE\n *  THIS FILE IS BUILD AS A WEB WORKER\n *\n * ##################################################\n */\nimport {parentPort} from 'node:worker_threads';\nimport {existsSync, mkdtempSync, rmSync} from 'fs';\nimport {join, sep} from 'path';\nimport {mkdir, readFile, writeFile} from 'fs/promises';\nimport {AssignmentSettingsInfo, Submission} from '../src/shared/info-objects/assignment-settings.info';\nimport {cloneDeep, filter, isNil} from 'lodash';\nimport {copy} from 'fs-extra';\nimport {tmpdir} from 'os';\nimport {DEFAULT_WORKSPACE, SETTING_FILE} from '../src/shared/constants/constants';\nimport {SettingInfo} from '../src/shared/info-objects/setting.info';\nimport {CONFIG_DIR, CONFIG_FILE} from './constants';\nimport {isJson, writeToFile} from './utils';\nconst zipDir = require('zip-dir');\n\n/**\n * ##################################################\n *\n *  BE REALLY CAREFUL WHAT YOU IMPORT HERE\n *  THIS FILE IS BUILD AS A WEB WORKER\n *\n * ##################################################\n */\nfunction getConfig(): Promise<SettingInfo> {\n  return readFile(CONFIG_DIR + CONFIG_FILE).then((data) => {\n    if (!isJson(data)) {\n      return Promise.reject(`Corrupt configuration files at \"${CONFIG_DIR}${CONFIG_FILE}\"`);\n    }\n\n    return JSON.parse(data.toString());\n  });\n}\n\nfunction getWorkingDirectoryAbsolutePath(workspaceName: string): Promise<string> {\n  return getConfig().then((config) => {\n    if (workspaceName === DEFAULT_WORKSPACE || isNil(workspaceName)) {\n      return config.defaultPath;\n    } else {\n      return config.defaultPath + sep + workspaceName;\n    }\n  });\n}\nfunction getAssignmentDirectoryAbsolutePath(workspaceName: string, assignmentName: string): Promise<string> {\n  return getWorkingDirectoryAbsolutePath(workspaceName).then((workingDirectory) => {\n    return workingDirectory + sep + assignmentName;\n  });\n}\n\nfunction getAssignmentSettingsFor(workspaceName: string, assignmentName: string): Promise<AssignmentSettingsInfo> {\n  return getAssignmentDirectoryAbsolutePath(workspaceName, assignmentName)\n    .then((directory) => getAssignmentSettingsAt(directory));\n}\n\n\nfunction getAssignmentSettingsAt(assignmentFolder: string): Promise<AssignmentSettingsInfo> {\n  assignmentFolder = assignmentFolder.replace(/\\//g, sep);\n  if (existsSync(assignmentFolder)) {\n    return readFile(assignmentFolder + sep + SETTING_FILE).then((data) => {\n      if (!isJson(data)) {\n        return Promise.reject('Assignment settings is not JSON');\n      }\n      return JSON.parse(data.toString()) as AssignmentSettingsInfo;\n    }, (error) => {\n      return Promise.reject(error.message);\n    });\n  } else {\n    return Promise.reject('Could not load assignment settings');\n  }\n}\n\nfunction writeAssignmentSettingsAt(\n  assignmentSettings: AssignmentSettingsInfo,\n  assignmentAbsolutePath: string): Promise<AssignmentSettingsInfo> {\n  const buffer = new Uint8Array(Buffer.from(JSON.stringify(assignmentSettings)));\n\n  return writeToFile(assignmentAbsolutePath + sep + SETTING_FILE, buffer, null, 'Failed to save assignment settings!').then(() => {\n    return assignmentSettings;\n  });\n}\n\nfunction cleanupTemp(tmpDir: string) {\n  try {\n    if (tmpDir) {\n      rmSync(tmpDir, { recursive: true });\n    }\n  } catch (e) {\n    console.error(`An error has occurred while removing the temp folder at ${tmpDir}. Please remove it manually. Error: ${e}`);\n  }\n}\n\nparentPort.on('message', (exportAssignmentsRequest: any) => {\n\n    const tempDirectory = mkdtempSync(join(tmpdir(), 'pdfm-'));\n    const exportTempDirectory = tempDirectory + sep + exportAssignmentsRequest.assignmentName;\n\n    return Promise.all([\n      getAssignmentSettingsFor(exportAssignmentsRequest.workspaceFolder, exportAssignmentsRequest.assignmentName),\n      getAssignmentDirectoryAbsolutePath(exportAssignmentsRequest.workspaceFolder, exportAssignmentsRequest.assignmentName),\n      mkdir(exportTempDirectory)\n    ])\n      .then(([assignmentSettings, originalAssignmentDirectory]) => {\n        let exportSubmissions: Submission[] = assignmentSettings.submissions;\n\n        if (!isNil(exportAssignmentsRequest.studentIds)) {\n          // If a list of student ids was supplied we'll filter only those\n          exportSubmissions = filter(assignmentSettings.submissions, (submission) => {\n            return exportAssignmentsRequest.studentIds.indexOf(submission.studentId) >= 0;\n          });\n        }\n\n        // Copy all the submission files\n        const promises: Promise<any>[] = exportSubmissions.map((submission) => {\n          return copy(\n            originalAssignmentDirectory + sep + submission.directoryName,\n            exportTempDirectory + sep + submission.directoryName,\n            {\n              recursive: true\n            }\n          );\n        });\n        return Promise.all(promises)\n          .then(() => {\n            // We need to create a settings file\n            const exportSettings = cloneDeep(assignmentSettings);\n            if (!isNil(exportAssignmentsRequest.studentIds)) {\n              // Filter out submissions if required\n              exportSettings.submissions = exportSettings.submissions.filter((submission) => {\n                return exportAssignmentsRequest.studentIds.indexOf(submission.studentId) >= 0;\n              });\n            }\n            return writeAssignmentSettingsAt(exportSettings, exportTempDirectory);\n          })\n          .then(() => {\n            return zipDir(tempDirectory);\n          })\n          .then((buffer) => {\n            cleanupTemp(tempDirectory);\n            return buffer;\n          }, (error) => {\n            cleanupTemp(tempDirectory);\n            return Promise.reject(error.message);\n          });\n      })\n      .then((buffer) => {\n        return writeFile(exportAssignmentsRequest.exportPath + sep + exportAssignmentsRequest.assignmentName + '-' + exportAssignmentsRequest.markerEmail + '.zip', buffer);\n      })\n      .then(() => {\n        parentPort.postMessage('Created zip: ' + exportAssignmentsRequest.exportPath + sep + exportAssignmentsRequest.markerEmail + '.zip');\n      });\n\n\n\n\n\n});\n"],"names":[],"sourceRoot":""}